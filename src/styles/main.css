/* ============================================================
   Git Gource Visualizer — Premium Museum Dusk Design System
   ============================================================ */

/* ---------- Premium fonts loaded in index.html ---------- */

:root {
    /* === Museum Dusk Color Palette === */
    /* Backgrounds - Deep sophistication */
    --bg-primary: #0b0d12;
    --bg-secondary: rgba(17, 19, 26, 0.85);
    --bg-tertiary: #181b23;
    --bg-surface: rgba(24, 27, 35, 0.68);

    /* Accents - Refined terracotta & clay tones */
    --accent-primary: #d4956c;
    --accent-secondary: #a98467;
    --accent-tertiary: #c1906d;

    /* Semantic colors - Natural palette */
    --accent-success: #82a886;
    --accent-danger: #c77d7d;
    --accent-warning: #d4a96f;
    --accent-info: #8aa4b8;

    /* Text - Warm neutrals */
    --text-primary: #e8e3dc;
    --text-secondary: #9d948a;
    --text-muted: #6a6359;
    --text-inverse: #0e1014;

    /* Borders - Subtle definition */
    --border-primary: rgba(212, 149, 108, 0.14);
    --border-secondary: rgba(212, 149, 108, 0.08);
    --border-hover: rgba(212, 149, 108, 0.32);

    /* Glass morphism */
    --glass-bg: rgba(14, 16, 22, 0.75);
    --glass-border: rgba(212, 149, 108, 0.1);
    --glass-blur: 20px;

    /* Gource Theme Variables (for JS integration) */
    --theme-bg: #0b0d12;
    --theme-text: #e8e3dc;
    --theme-dir: #d4956c;

    /* === Typography System === */
    --font-display: 'DM Sans', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    --font-primary: 'DM Sans', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    --font-mono: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;

    /* Type scale (modular scale 1.25) */
    --text-xs: 10px;
    --text-sm: 11px;
    --text-base: 13px;
    --text-md: 14px;
    --text-lg: 16px;
    --text-xl: 20px;
    --text-2xl: 25px;
    --text-3xl: 31px;
    --text-4xl: 39px;
    --text-5xl: 49px;

    /* Line heights */
    --leading-tight: 1.25;
    --leading-snug: 1.375;
    --leading-normal: 1.5;
    --leading-relaxed: 1.625;
    --leading-loose: 1.75;

    /* Letter spacing */
    --tracking-tight: -0.02em;
    --tracking-normal: 0;
    --tracking-wide: 0.02em;
    --tracking-wider: 0.05em;
    --tracking-widest: 0.1em;

    /* Font weights */
    --weight-light: 300;
    --weight-normal: 400;
    --weight-medium: 500;
    --weight-semibold: 600;
    --weight-bold: 700;

    /* === Spacing Scale (8px base) === */
    --space-1: 4px;
    --space-2: 8px;
    --space-3: 12px;
    --space-4: 16px;
    --space-5: 24px;
    --space-6: 32px;
    --space-7: 48px;
    --space-8: 64px;

    /* === Radius System === */
    --radius-xs: 4px;
    --radius-sm: 7px;
    --radius-md: 11px;
    --radius-lg: 15px;
    --radius-xl: 20px;

    /* === Shadow System === */
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.35);
    --shadow-md: 0 4px 24px rgba(0, 0, 0, 0.45), 0 1px 4px rgba(0, 0, 0, 0.25);
    --shadow-lg: 0 8px 48px rgba(0, 0, 0, 0.55), 0 2px 8px rgba(0, 0, 0, 0.3);
    --shadow-elevated: 0 12px 64px rgba(0, 0, 0, 0.65);

    /* === Z-Index Scale === */
    --z-canvas: 0;
    --z-overlay: 10;
    --z-date-display: 100;
    --z-tooltip: 150;
    --z-panels: 200;
    --z-reset-btn: 299;
    --z-controls: 300;
    --z-recording: 400;
    --z-modal-overlay: 800;
    --z-modal: 900;
    --z-intro: 1000;
    --z-loading: 1100;
    --z-toast: 1200;
}

/* === Base Styles === */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html,
body {
    width: 100%;
    height: 100%;
    font-family: var(--font-primary);
    background: var(--theme-bg);
    color: var(--theme-text);
    overflow: hidden;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* ============================================================
   CANVAS
   ============================================================ */
#canvas-container {
    position: absolute;
    inset: 0;
    touch-action: none;
    z-index: var(--z-canvas);
}

#canvas-container canvas {
    touch-action: none;
}

/* ============================================================
   INTRO SCREEN
   ============================================================ */
.intro-screen {
    position: fixed;
    inset: 0;
    background: var(--bg-primary);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: var(--z-intro);
    padding: var(--space-5);
}

.intro-screen.hidden {
    display: none;
}

.intro-title {
    font-family: var(--font-display);
    font-size: 49px;
    font-weight: var(--weight-light);
    color: var(--accent-primary);
    margin-bottom: var(--space-2);
    letter-spacing: var(--tracking-widest);
    text-transform: uppercase;
}

.intro-subtitle {
    font-size: var(--text-md);
    color: var(--text-secondary);
    margin-bottom: var(--space-7);
    font-weight: var(--weight-normal);
    letter-spacing: var(--tracking-wide);
}

/* ---------- Drop Zone ---------- */
.drop-zone {
    width: 100%;
    max-width: 540px;
    border: 2px dashed var(--border-primary);
    border-radius: var(--radius-lg);
    padding: var(--space-7) var(--space-6);
    text-align: center;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    background: var(--bg-surface);
}

.drop-zone:hover,
.drop-zone.drag-over {
    border-color: var(--accent-primary);
    background: rgba(212, 149, 108, 0.06);
    transform: translateY(-3px);
    box-shadow: var(--shadow-md);
}

.drop-zone-icon {
    font-size: 42px;
    margin-bottom: var(--space-4);
    opacity: 0.6;
}

.drop-zone-text {
    font-size: var(--text-lg);
    color: var(--text-primary);
    margin-bottom: var(--space-2);
    font-weight: var(--weight-medium);
}

.drop-zone-hint {
    font-size: var(--text-sm);
    color: var(--text-muted);
    letter-spacing: var(--tracking-wide);
}

/* ---------- Command Box ---------- */
.command-box {
    width: 100%;
    max-width: 540px;
    margin-top: var(--space-6);
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    padding: var(--space-4);
    text-align: left;
    border: 1px solid var(--glass-border);
}

.command-label {
    font-size: var(--text-xs);
    color: var(--text-muted);
    margin-bottom: var(--space-2);
    text-transform: uppercase;
    letter-spacing: var(--tracking-wider);
    font-weight: var(--weight-semibold);
}

.command-text {
    font-family: var(--font-mono);
    font-size: var(--text-sm);
    color: var(--accent-success);
    background: rgba(11, 13, 18, 0.8);
    padding: var(--space-3) var(--space-3);
    border-radius: var(--radius-sm);
    overflow-x: auto;
    white-space: nowrap;
    cursor: pointer;
    border: 1px solid var(--border-secondary);
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

.command-text:hover {
    border-color: var(--accent-primary);
    background: rgba(11, 13, 18, 0.95);
}

.command-hint {
    font-size: var(--text-xs);
    color: var(--text-muted);
    margin-top: var(--space-2);
    letter-spacing: var(--tracking-wide);
}

.copy-feedback {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: var(--accent-primary);
    color: var(--text-inverse);
    padding: var(--space-3) var(--space-5);
    border-radius: var(--radius-sm);
    font-size: var(--text-base);
    font-weight: var(--weight-semibold);
    z-index: var(--z-toast);
    opacity: 0;
    transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: none;
    box-shadow: var(--shadow-lg);
}

.copy-feedback.show {
    opacity: 1;
}

#file-input {
    display: none;
}

.reference {
    margin-top: var(--space-7);
    font-size: var(--text-sm);
    color: var(--text-muted);
    text-align: center;
    line-height: var(--leading-loose);
}

.reference a {
    color: var(--accent-secondary);
    text-decoration: none;
    transition: color 0.2s ease;
}

.reference a:hover {
    color: var(--accent-primary);
}

.powered-by {
    font-size: var(--text-xs);
    opacity: 0.5;
}

.powered-by a {
    color: inherit;
    text-decoration: none;
}

/* ============================================================
   LOADING OVERLAY
   ============================================================ */
.loading-overlay {
    position: fixed;
    inset: 0;
    background: var(--bg-primary);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: var(--z-loading);
    transition: opacity 0.3s ease;
}

.loading-overlay.hidden {
    opacity: 0;
    pointer-events: none;
}

.spinner {
    width: 48px;
    height: 48px;
    border: 2px solid var(--bg-tertiary);
    border-top-color: var(--accent-primary);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

.loading-text {
    margin-top: var(--space-4);
    color: var(--text-secondary);
    font-size: var(--text-base);
    font-weight: var(--weight-normal);
}

.progress-bar {
    width: 220px;
    height: 3px;
    background: var(--bg-tertiary);
    border-radius: 2px;
    margin-top: var(--space-4);
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: var(--accent-primary);
    width: 0%;
    transition: width 0.3s ease;
}

/* ============================================================
   CONTROL PANEL (bottom center)
   ============================================================ */
.control-panel {
    position: fixed;
    bottom: var(--space-4);
    left: 50%;
    transform: translateX(-50%);
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur)) saturate(140%);
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(140%);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg);
    padding: var(--space-3) var(--space-4);
    z-index: var(--z-controls);
    display: none;
    box-shadow: var(--shadow-lg);
    max-width: calc(100vw - var(--space-5));
}

.timeline-container {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    flex-wrap: wrap;
    justify-content: center;
}

/* ---------- Play Button ---------- */
.play-btn {
    width: 40px;
    height: 40px;
    background: var(--accent-primary);
    border: none;
    border-radius: 50%;
    color: var(--text-inverse);
    font-size: var(--text-md);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    flex-shrink: 0;
    font-family: inherit;
    box-shadow: 0 2px 12px rgba(212, 149, 108, 0.4);
}

.play-btn:hover {
    background: var(--accent-tertiary);
    transform: scale(1.1);
    box-shadow: 0 4px 16px rgba(212, 149, 108, 0.5);
}

.play-btn:active {
    transform: scale(0.95);
}

/* ---------- Timeline Slider ---------- */
.timeline-slider {
    flex: 1 1 200px;
    min-width: 120px;
    max-width: 460px;
    appearance: none;
    -webkit-appearance: none;
    height: 5px;
    background: var(--bg-tertiary);
    border-radius: 3px;
    outline: none;
    cursor: pointer;
}

.timeline-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 16px;
    height: 16px;
    background: var(--accent-primary);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 8px rgba(212, 149, 108, 0.4);
    transition: transform 0.2s ease;
}

.timeline-slider::-webkit-slider-thumb:hover {
    transform: scale(1.25);
    box-shadow: 0 0 12px rgba(212, 149, 108, 0.6);
}

.timeline-slider::-moz-range-thumb {
    width: 16px;
    height: 16px;
    background: var(--accent-primary);
    border-radius: 50%;
    cursor: pointer;
    border: none;
    box-shadow: 0 0 8px rgba(212, 149, 108, 0.4);
}

/* ---------- Timeline Info ---------- */
.timeline-info {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    min-width: 110px;
    flex-shrink: 0;
}

.timeline-date {
    font-size: var(--text-sm);
    color: var(--text-primary);
    font-weight: var(--weight-medium);
}

.timeline-commit {
    font-size: var(--text-xs);
    color: var(--text-muted);
    margin-top: 2px;
}

/* ---------- Speed Control ---------- */
.speed-control {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    padding-left: var(--space-3);
    border-left: 1px solid var(--border-primary);
    flex-shrink: 0;
}

.speed-btn {
    background: transparent;
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-sm);
    padding: 4px 8px;
    color: var(--text-muted);
    font-size: var(--text-xs);
    font-family: var(--font-primary);
    font-weight: var(--weight-medium);
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.speed-btn:hover {
    border-color: var(--accent-secondary);
    color: var(--text-secondary);
    background: rgba(212, 149, 108, 0.05);
}

.speed-btn.active {
    background: var(--accent-primary);
    border-color: var(--accent-primary);
    color: var(--text-inverse);
}

/* ---------- Download Button ---------- */
.download-control {
    padding-left: var(--space-3);
    border-left: 1px solid var(--border-primary);
    flex-shrink: 0;
}

.download-btn {
    background: transparent;
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-sm);
    padding: 6px var(--space-3);
    color: var(--text-secondary);
    font-size: var(--text-sm);
    font-family: var(--font-primary);
    font-weight: var(--weight-medium);
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    white-space: nowrap;
}

.download-btn:hover {
    border-color: var(--accent-primary);
    color: var(--text-primary);
    background: rgba(212, 149, 108, 0.08);
    transform: translateY(-1px);
}

.download-btn.recording {
    border-color: var(--accent-danger);
    color: var(--accent-danger);
}

/* ============================================================
   STATS PANEL (top-left)
   ============================================================ */
.stats-panel {
    position: fixed;
    top: var(--space-4);
    left: var(--space-4);
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur)) saturate(140%);
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(140%);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-md);
    padding: var(--space-4);
    z-index: var(--z-panels);
    display: none;
    min-width: 180px;
    box-shadow: var(--shadow-md);
}

.stats-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-3);
    padding-bottom: var(--space-2);
    border-bottom: 1px solid var(--border-primary);
}

.stats-title {
    font-size: var(--text-xs);
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: var(--tracking-wider);
    font-weight: var(--weight-semibold);
}

.stats-actions {
    display: flex;
    gap: var(--space-2);
}

.icon-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: var(--text-md);
    cursor: pointer;
    padding: var(--space-1);
    border-radius: var(--radius-xs);
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    line-height: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 26px;
    height: 26px;
}

.icon-btn:hover {
    color: var(--accent-primary);
    background: rgba(212, 149, 108, 0.1);
}

.stat-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-2) 0;
}

.stat-row + .stat-row {
    border-top: 1px solid var(--border-secondary);
}

.stat-label {
    font-size: var(--text-sm);
    color: var(--text-muted);
    font-weight: var(--weight-normal);
}

.stat-value {
    font-family: var(--font-mono);
    font-size: var(--text-sm);
    font-weight: var(--weight-medium);
    color: var(--text-primary);
}

/* ============================================================
   COMMIT PANEL (top-right)
   ============================================================ */
.commit-panel {
    position: fixed;
    top: var(--space-4);
    right: var(--space-4);
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur)) saturate(140%);
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(140%);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-md);
    padding: var(--space-4);
    z-index: var(--z-panels);
    display: none;
    max-width: 320px;
    box-shadow: var(--shadow-md);
}

.commit-author {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    margin-bottom: var(--space-3);
}

.author-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: rgba(212, 149, 108, 0.12);
    border: 1.5px solid var(--border-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--text-md);
    font-weight: var(--weight-semibold);
    color: var(--accent-primary);
    flex-shrink: 0;
}

.author-name {
    font-size: var(--text-base);
    font-weight: var(--weight-medium);
    color: var(--text-primary);
}

.commit-message {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    line-height: var(--leading-relaxed);
    max-height: 56px;
    overflow: hidden;
    text-overflow: ellipsis;
}

.commit-files {
    margin-top: var(--space-3);
    padding-top: var(--space-3);
    border-top: 1px solid var(--border-primary);
}

.file-change {
    font-family: var(--font-mono);
    font-size: var(--text-xs);
    padding: var(--space-1) 0;
    display: flex;
    align-items: center;
    gap: var(--space-2);
    color: var(--text-secondary);
}

.file-change.added::before {
    content: '+';
    color: var(--accent-success);
    font-weight: var(--weight-bold);
}

.file-change.deleted::before {
    content: '−';
    color: var(--accent-danger);
    font-weight: var(--weight-bold);
}

.file-change.modified::before {
    content: '~';
    color: var(--accent-warning);
    font-weight: var(--weight-bold);
}

.file-change .line-stats {
    margin-left: auto;
    font-size: var(--text-xs);
    white-space: nowrap;
}

.file-change .line-stats .added {
    color: var(--accent-success);
}

.file-change .line-stats .deleted {
    color: var(--accent-danger);
}

.commit-line-summary {
    display: flex;
    justify-content: flex-end;
    gap: var(--space-3);
    margin-top: var(--space-2);
    padding-top: var(--space-2);
    border-top: 1px solid var(--border-primary);
    font-family: var(--font-mono);
    font-size: var(--text-xs);
}

.commit-line-summary .added {
    color: var(--accent-success);
}

.commit-line-summary .deleted {
    color: var(--accent-danger);
}

/* ============================================================
   RESET BUTTON (bottom-left) - CRITICAL FIX
   ============================================================ */
.reset-btn {
    position: fixed;
    bottom: var(--space-4);
    left: var(--space-4);
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur)) saturate(140%);
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(140%);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-md);
    padding: var(--space-2) var(--space-4);
    color: var(--text-secondary);
    font-family: var(--font-primary);
    font-size: var(--text-sm);
    font-weight: var(--weight-medium);
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: var(--z-reset-btn);
    box-shadow: var(--shadow-md);
    display: none;
}

.reset-btn:hover {
    border-color: var(--accent-primary);
    color: var(--text-primary);
    background: rgba(212, 149, 108, 0.08);
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.reset-btn:active {
    transform: translateY(0);
}

/* ============================================================
   TOOLTIP
   ============================================================ */
.tooltip {
    position: fixed;
    background: rgba(11, 13, 18, 0.95);
    backdrop-filter: blur(12px);
    border: 1px solid var(--border-primary);
    color: var(--text-primary);
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-sm);
    font-family: var(--font-mono);
    font-size: var(--text-sm);
    z-index: var(--z-tooltip);
    pointer-events: none;
    display: none;
    max-width: 300px;
    word-break: break-all;
    box-shadow: var(--shadow-lg);
}

.tooltip.visible {
    display: block;
}

/* ============================================================
   DATE DISPLAY (top-center, Gource-style)
   ============================================================ */
.date-display {
    position: fixed;
    top: 22px;
    left: 50%;
    transform: translateX(-50%);
    font-family: var(--font-display);
    font-size: var(--text-md);
    font-weight: var(--weight-light);
    color: rgba(232, 227, 220, 0.6);
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.6);
    z-index: var(--z-date-display);
    pointer-events: none;
    display: none;
    white-space: nowrap;
    letter-spacing: var(--tracking-wide);
}

.date-display.visible {
    display: block;
}

/* ============================================================
   ERROR TOAST
   ============================================================ */
.error-toast {
    position: fixed;
    top: 70px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--accent-danger);
    color: #fff;
    padding: var(--space-3) var(--space-5);
    border-radius: var(--radius-sm);
    font-size: var(--text-sm);
    font-weight: var(--weight-medium);
    z-index: var(--z-toast);
    display: none;
    max-width: 400px;
    text-align: center;
    box-shadow: var(--shadow-lg);
}

/* ============================================================
   RECORDING INDICATOR
   ============================================================ */
.recording-indicator {
    position: fixed;
    top: 58px;
    left: 50%;
    transform: translateX(-50%);
    display: none;
    align-items: center;
    gap: var(--space-2);
    background: rgba(11, 13, 18, 0.9);
    backdrop-filter: blur(12px);
    border: 1px solid var(--accent-danger);
    border-radius: var(--radius-sm);
    padding: var(--space-2) var(--space-4);
    z-index: var(--z-recording);
    font-size: var(--text-sm);
    color: var(--accent-danger);
    font-weight: var(--weight-medium);
}

.recording-indicator.active {
    display: flex;
}

.recording-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--accent-danger);
    animation: rec-pulse 1.2s ease-in-out infinite;
}

@keyframes rec-pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.2;
    }
}

/* ============================================================
   SETTINGS MODAL
   ============================================================ */
.settings-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(4px);
    z-index: var(--z-modal-overlay);
    display: none;
}

.settings-overlay.visible {
    display: block;
}

.settings-modal {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-lg);
    padding: var(--space-5) var(--space-6);
    z-index: var(--z-modal);
    width: 94%;
    max-width: 420px;
    box-shadow: var(--shadow-elevated);
    display: none;
}

.settings-modal.visible {
    display: block;
}

.settings-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-4);
    padding-bottom: var(--space-3);
    border-bottom: 1px solid var(--border-primary);
}

.settings-title {
    font-size: var(--text-lg);
    font-weight: var(--weight-semibold);
    color: var(--text-primary);
    letter-spacing: var(--tracking-normal);
}

.close-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 22px;
    cursor: pointer;
    padding: 0;
    line-height: 1;
    transition: color 0.2s ease;
}

.close-btn:hover {
    color: var(--text-primary);
}

.settings-group {
    margin-bottom: var(--space-4);
}

.settings-label {
    font-size: var(--text-xs);
    color: var(--text-muted);
    margin-bottom: var(--space-2);
    display: block;
    text-transform: uppercase;
    letter-spacing: var(--tracking-wider);
    font-weight: var(--weight-semibold);
}

.color-picker-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-2);
    background: rgba(11, 13, 18, 0.5);
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-sm);
    border: 1px solid var(--border-secondary);
    transition: border-color 0.2s ease;
}

.color-picker-row:hover {
    border-color: var(--border-primary);
}

.color-picker-label {
    font-size: var(--text-sm);
    color: var(--text-secondary);
}

input[type="color"] {
    -webkit-appearance: none;
    appearance: none;
    border: none;
    width: 30px;
    height: 30px;
    background: none;
    cursor: pointer;
}

input[type="color"]::-webkit-color-swatch-wrapper {
    padding: 0;
}

input[type="color"]::-webkit-color-swatch {
    border: 2px solid var(--border-primary);
    border-radius: 50%;
}

.settings-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    width: 26px;
    height: 26px;
    border-radius: var(--radius-xs);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--text-md);
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.settings-btn:hover {
    color: var(--accent-primary);
    background: rgba(212, 149, 108, 0.1);
}

/* ---------- Preset Grid ---------- */
.preset-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-2);
    margin-top: var(--space-2);
}

.preset-btn {
    background: rgba(11, 13, 18, 0.5);
    border: 1px solid var(--border-primary);
    color: var(--text-muted);
    padding: var(--space-2);
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: var(--text-sm);
    font-family: var(--font-primary);
    font-weight: var(--weight-medium);
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

.preset-btn:hover {
    border-color: var(--accent-secondary);
    color: var(--text-secondary);
    background: rgba(212, 149, 108, 0.05);
}

.preset-btn.active {
    background: var(--accent-primary);
    color: var(--text-inverse);
    border-color: var(--accent-primary);
}

/* ============================================================
   RESPONSIVE BREAKPOINTS
   ============================================================ */

/* Extra large desktop (1920+) */
@media (min-width: 1920px) {
    .control-panel {
        padding: var(--space-4) var(--space-5);
    }

    .stats-panel,
    .commit-panel {
        padding: var(--space-5);
    }
}

/* Large desktop (1280-1919px): default styles */

/* Medium desktop / landscape tablet (960-1279px) */
@media (max-width: 1279px) {
    .timeline-slider {
        max-width: 320px;
    }

    .commit-panel {
        max-width: 260px;
    }
}

/* Tablet portrait (768-959px) */
@media (max-width: 959px) {
    .stats-panel {
        min-width: 160px;
    }

    .commit-panel {
        max-width: 240px;
    }

    .timeline-slider {
        max-width: 260px;
    }

    .speed-control {
        gap: var(--space-1);
    }

    .speed-btn {
        padding: 3px 6px;
        font-size: var(--text-xs);
    }
}

/* Small tablet / large phone landscape (600-767px) */
@media (max-width: 767px) {
    .stats-panel {
        top: auto;
        bottom: 90px;
        left: var(--space-3);
        min-width: 150px;
        padding: var(--space-3);
    }

    .commit-panel {
        top: auto;
        bottom: 90px;
        right: var(--space-3);
        max-width: 220px;
        padding: var(--space-3);
    }

    .control-panel {
        bottom: var(--space-2);
        padding: var(--space-2) var(--space-3);
    }

    .reset-btn {
        bottom: var(--space-2);
        left: var(--space-2);
        padding: var(--space-2) var(--space-3);
        font-size: var(--text-xs);
    }

    .timeline-slider {
        max-width: 200px;
        min-width: 100px;
    }

    .timeline-info {
        min-width: 90px;
    }

    .timeline-date {
        font-size: var(--text-sm);
    }

    .timeline-commit {
        font-size: var(--text-xs);
    }

    .download-control {
        padding-left: var(--space-2);
    }

    .date-display {
        font-size: var(--text-sm);
        top: var(--space-3);
    }

    .intro-title {
        font-size: var(--text-3xl);
        letter-spacing: var(--tracking-wider);
    }

    .intro-subtitle {
        font-size: var(--text-sm);
        margin-bottom: var(--space-6);
    }

    .drop-zone {
        padding: var(--space-6) var(--space-5);
        max-width: 460px;
    }

    .command-box {
        max-width: 460px;
    }
}

/* Phone portrait (360-599px) */
@media (max-width: 599px) {
    .stats-panel {
        bottom: 78px;
        left: var(--space-2);
        right: var(--space-2);
        min-width: auto;
        max-width: calc(100vw - var(--space-4));
        display: none;
    }

    .stats-panel[style*="display: block"] {
        display: flex !important;
        flex-wrap: wrap;
        gap: var(--space-1);
    }

    .stats-header {
        width: 100%;
    }

    .stat-row {
        flex: 1 1 calc(50% - var(--space-1));
        min-width: 0;
    }

    .commit-panel {
        display: none !important;
    }

    .control-panel {
        bottom: var(--space-2);
        left: var(--space-2);
        right: var(--space-2);
        transform: none;
        padding: var(--space-2);
    }

    .reset-btn {
        bottom: var(--space-2);
        left: var(--space-2);
        padding: var(--space-2);
        font-size: var(--text-xs);
    }

    .timeline-container {
        gap: var(--space-2);
    }

    .play-btn {
        width: 36px;
        height: 36px;
        font-size: var(--text-sm);
    }

    .timeline-slider {
        flex: 1 1 80px;
        min-width: 80px;
        max-width: none;
    }

    .timeline-info {
        display: none;
    }

    .speed-control {
        display: none;
    }

    .download-control {
        border-left: none;
        padding-left: 0;
    }

    .download-btn {
        font-size: var(--text-xs);
        padding: var(--space-1) var(--space-2);
    }

    .date-display {
        font-size: var(--text-xs);
        top: var(--space-2);
    }

    .intro-title {
        font-size: var(--text-2xl);
        letter-spacing: var(--tracking-wide);
    }

    .drop-zone {
        padding: var(--space-5) var(--space-4);
    }

    .drop-zone-icon {
        font-size: 32px;
    }

    .drop-zone-text {
        font-size: var(--text-md);
    }

    .command-text {
        font-size: var(--text-xs);
    }

    .settings-modal {
        width: 96%;
        padding: var(--space-4);
    }
}

/* Very small phones (< 360px) */
@media (max-width: 359px) {
    .intro-title {
        font-size: var(--text-xl);
        letter-spacing: var(--tracking-normal);
    }

    .intro-subtitle {
        font-size: var(--text-xs);
        margin-bottom: var(--space-5);
    }

    .drop-zone {
        padding: var(--space-4) var(--space-3);
    }

    .command-box {
        padding: var(--space-3);
    }

    .download-control {
        display: none;
    }

    .reset-btn {
        font-size: 10px;
        padding: var(--space-1) var(--space-2);
    }
}

/* ============================================================
   FOCUS STATES (Accessibility)
   ============================================================ */
button:focus-visible,
input:focus-visible,
.drop-zone:focus-visible {
    outline: 2px solid var(--accent-primary);
    outline-offset: 2px;
}

/* ============================================================
   UTILITY CLASSES
   ============================================================ */
.visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}
